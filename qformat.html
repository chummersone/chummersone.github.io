<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Convert between fractional values and their Qm.n fixed-point integer representations, and calculate the representation error. Perform arithmetic operations on fixed-point values.">
        <meta name="keywords" content="q-fomat, fixed-point, fractional, convert, calculate, calculator, arithmetic">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Q-format Converter &amp; Calculator</title>
        <meta property="og:title" content="Q-format Converter &amp; Calculator" />
        <meta property="og:url" content="https://chummersone.github.io/qformat.html" />
        <meta property="og:locale" content="en_GB" />
        <meta property="og:description" content="Convert between fractional and Qm.n fixed-point values. Perform arithmetic operations on fixed-point values.">
        <meta property="og:site_name" content="chummersone.github.io" />
        <meta property="og:type" content="website" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
        <link rel="stylesheet" href="https://chummersone.github.io/assets/css/style.css?v=f6040d589f1187e6eaa1ec97f2b3af33299fb0ad">
        <link rel="stylesheet" href="css/qformat.css?v=20">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
                integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
                crossorigin="anonymous">
        </script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        <script src="scripts/qformat.js?v=10"></script>
        <script src="scripts/qformat.converter.js?v=9"></script>
        <script src="scripts/qformat.dbconverter.js?v=9"></script>
        <script src="scripts/qformat.calculator.js?v=10"></script>
        <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>
            $(function() {
                var dataIndex = 'tab';
                var dataStore = window.sessionStorage;
                var tabIndex = 0;
                try {
                    tabIndex = dataStore.getItem(dataIndex);
                } catch(e) {
                    tabIndex = 0;
                }
                $tabs = $('#tabs');
                $tabs.tabs({
                    activate: function(event, ui) {
                        var scrollTop = $(window).scrollTop();
                        var query = window.location.hash.split('?')[1];
                        var queryStr = ''
                        if (query) {
                            queryStr = '?' + query
                        }
                        window.location.hash = ui.newPanel.attr('id') + queryStr;
                        $(window).scrollTop(scrollTop);
                    },
                });
                var hash = window.location.hash.split('?')[0];
                if (hash) {
                    var index = $('#tabs a[href="' + hash + '"]').parent().index();
                    $tabs.tabs("option", "active", index);
                }
                window.MathJax = { tex: { tags: 'all' } };
                $( 'span.tooltip' ).tooltip({
                    items: "[data-text]",
                    content: function() {
                        return $( this ).data('text');
                    }
                });
            });
        </script>
    </head>

    <body>
        <h1>Q-format Converter &amp; Calculator</h1>

        <ul>
            <li>Convert between fractional values and their <em>Qm.n</em> fixed-point integer representations,
                and calculate the representation error.</li>
            <li>Perform arithmetic operations on fixed-point values.</li>
        </ul>

        <p>Please <a href="https://github.com/chummersone/chummersone.github.io/issues">report any issues on GitHub</a>.</p>

        <div id="container">
            <div id="tabs">
                <ul>
                <li><a href="#converter">Converter</a></li>
                <li><a href="#db_converter">dB Converter</a></li>
                <li><a href="#arithmetic">Calculator</a></li>
                <li><a href="#information">Information</a></li>
                </ul>
                <div class="tab-panel" id="converter">

                    <div class="column-container">
                        <fieldset>
                            <legend>Q-Format Settings</legend>

                            <p>Choose your conversion options. <a id="remember" href="">Remember these options.</a></p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="num_bits">Word size in bits (<em>m+n</em>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="num_bits">
                                        <option value="16">16</option>
                                        <option value="24" selected>24</option>
                                        <option value="32">32</option>
                                        <option value="64">64</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                             --><div class="col w75">
                                    <select id="num_frac_bits">
                                        <option value="23" selected>23</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="signed">Signed?</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="signed" type="checkbox" checked>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="format">Integer format</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="format">
                                        <option value="hex" selected>Hexadecimal</option>
                                        <option value="dec">Decimal</option>
                                        <option value="bin">Binary</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="maxfloat">Maximum fractional value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="maxfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="minfloat">Minimum fractional value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="minfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="resolution">Resolution</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="resolution" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <label>Bit positions and values</label>

                                <table id="bit-pos">
                                    <tr>
                                        <th>Bit Position</th>
                                        <th>Bit Value</th>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </div>
                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Convert</legend>

                            <p>Type an integer or fractional value in the boxes below. Click or tab away to update.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="integer">Integer (<span id="labelformat">hexadecimal</span>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="integer" type="text" value="0" maxlength="6">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="float">Fractional value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="float" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="realfloat">Fixed-point value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="realfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="floaterror">Representation error</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="floaterror" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="errordb"><span class="tooltip" data-text="Error in dB is calculated with reference to the fractional value.">Representation error (dB)</span></label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="errordb" type="text" value="0" disabled>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Batch Convert</legend>

                            <p>Type integers or fractional values in the boxes below separated by commas, spaces or new lines. Click or tab away to update.</p>

                            <label for="batch-int">Integers</label>
                            <textarea id="batch-int" rows="6"></textarea>

                            <label for="batch-float">Fractional values</label>
                            <textarea id="batch-float" rows="6"></textarea>

                        </fieldset>
                    </div>

                </div>

                <div class="tab-panel" id="db_converter">

                    <div class="column-container">
                        <fieldset>
                            <legend>Q-Format Settings</legend>

                            <p>Choose your conversion options. <a id="db_remember" href="">Remember these options.</a></p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_num_bits">Word size in bits (<em>m+n</em>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="db_num_bits">
                                        <option value="16">16</option>
                                        <option value="24" selected>24</option>
                                        <option value="32">32</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                             --><div class="col w75">
                                    <select id="db_num_frac_bits">
                                        <option value="23" selected>23</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_signed">Signed?</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="db_signed" type="checkbox">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_format">Integer format</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="db_format">
                                        <option value="hex" selected>Hexadecimal</option>
                                        <option value="dec">Decimal</option>
                                        <option value="bin">Binary</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_multiplier">dB Multiplier \(B\)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="db_multiplier">
                                        <option value="10">10&times;</option>
                                        <option value="20" selected>20&times;</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_maxfloat">Maximum dB value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="db_maxfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_minfloat">Minimum finite dB value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="db_minfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Convert</legend>

                            <p>
                                Type an integer or dB value in the boxes below. Click or tab away to update.
                                The converter will convert the dB value \(x\) to a linear value \(y = 10^{x / B}\),
                                where \(B\) is the multiplier (10 or 20), and then convert the linear value to a
                                fixed-point integer. The dB value is calculated by reversing these operations,
                                with \(x = B\log_{10}y\).
                            </p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_integer">Integer (<span id="db_labelformat">hexadecimal</span>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="db_integer" type="text" value="0" maxlength="6">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_float">dB value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="db_float" type="text" value="-3">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_realfloat">Fixed-point dB value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="db_realfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="db_errordb">Representation error (dB)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="db_errordb" type="text" value="0" disabled>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Batch Convert</legend>

                            <p>Type integers or dB values in the boxes below separated by commas, spaces or new lines. Click or tab away to update.</p>

                            <label for="db_batch-int">Integers</label>
                            <textarea id="db_batch-int" rows="6"></textarea>

                            <label for="db_batch-float">dB values</label>
                            <textarea id="db_batch-float" rows="6"></textarea>

                        </fieldset>
                    </div>

                </div>

                <div class="tab-panel" id="arithmetic">

                    <div class="column-container">
                        <fieldset>
                            <legend>Left Operand</legend>

                            <p>Choose the format and value of the left operand.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_int">Integer value (<span id="labelformat_lhs">hexadecimal</span>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="left_operand_int" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_float">Fractional value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="left_operand_float" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_num_bits">Word size in bits (<em>m+n</em>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="left_operand_num_bits">
                                        <option value="16">16</option>
                                        <option value="24" selected>24</option>
                                        <option value="32">32</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                             --><div class="col w75">
                                    <select id="left_operand_num_frac_bits">
                                        <option value="23" selected>23</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_signed">Signed?</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="left_operand_signed" type="checkbox" checked>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_format">Integer format</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="left_operand_format">
                                        <option value="hex" selected>Hexadecimal</option>
                                        <option value="dec">Decimal</option>
                                        <option value="bin">Binary</option>
                                    </select>
                                </div>
                            </div>

                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Operator</legend>

                            <p>Choose the operation, the arithmetic behaviour, and the output word size.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="operator">Operator</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="operator">
                                        <option value="add" selected>Add</option>
                                        <option value="subtract">Subtract</option>
                                        <option value="multiply">Multiply</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="behaviour"><span class="tooltip" data-text="Overflowing results are mitigated by
                                        saturation or wrapping. Saturation clamps the result to the arithmetic range of the output
                                        Q-format. This will retain the sign of the result, whilst affecting the magnitude. Wrapping
                                        is implemented by incrementing or decrementing the integer result by 2^(m+n) until the result
                                        is within the range of the output Q-format. This may change the sign and magnitude of the
                                        result.">Behaviour</span></label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="behaviour">
                                        <option value="saturate" selected>Saturate</option>
                                        <option value="wrap">Wrap</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_out_num_bits"><span class="tooltip" data-text="Size of the word
                                        used for the calculation result. The precision can be reduced by choosing the right
                                        shift below.">Calculation size in bits (<em>m+n</em>)</span></label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="arithmetic_out_num_bits">
                                        <option value="16">16</option>
                                        <option value="24">24</option>
                                        <option value="32">32</option>
                                        <option value="40">40</option>
                                        <option value="48" selected>48</option>
                                        <option value="56">56</option>
                                        <option value="64">64</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_right_shift"><span class="tooltip" data-text="Perform an
                                        arithmetic right shift after saturation or rounding.">
                                        Right shift result</span></label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="arithmetic_right_shift">
                                        <option value="0" selected>0</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_shift_round">Right shift with rounding?</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="right_shift_round" type="checkbox" checked>
                                </div>
                            </div>

                            <p>

                            </p>

                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Right Operand</legend>

                            <p>Choose the format and value of the right operand.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_int">Integer value (<span id="labelformat_rhs">hexadecimal</span>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="right_operand_int" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_float">Fractional value</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="right_operand_float" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_num_bits">Word size in bits (<em>m+n</em>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="right_operand_num_bits">
                                        <option value="16">16</option>
                                        <option value="24" selected>24</option>
                                        <option value="32">32</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                             --><div class="col w75">
                                    <select id="right_operand_num_frac_bits">
                                        <option value="23" selected>23</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_signed">Signed?</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="right_operand_signed" type="checkbox" checked>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_format">Integer format</label>
                                </div><!--
                                 --><div class="col w75">
                                    <select id="right_operand_format">
                                        <option value="hex" selected>Hexadecimal</option>
                                        <option value="dec">Decimal</option>
                                        <option value="bin">Binary</option>
                                    </select>
                                </div>
                            </div>

                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Result</legend>

                            <p>The result of the operation.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_fixed">Result (Fixed-point)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="arithmetic_result_fixed" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_int">Result (Hexadecimal)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="arithmetic_result_int" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_float">Result (Fractional)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="arithmetic_result_float" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="arithmetic_result_num_frac_bits" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="wrap_sat_flag">Wrapped / Saturated?</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input class="flag" id="wrap_sat_flag" type="checkbox">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_floaterror">Error</label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="arithmetic_result_floaterror" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_errordb"><span class="tooltip" data-text="Error in dB is calculated with reference to the fractional result.">Error (dB)</span></label>
                                </div><!--
                                 --><div class="col w75">
                                    <input id="arithmetic_result_errordb" type="text" value="0" disabled>
                                </div>
                            </div>
                        </fieldset>
                    </div>

                </div>

                <div class="tab-panel" id="information">

                    <p>
                        Many embedded DSPs and low-powered processors do not support floating-point arithmetic. Instead, they
                        support only integer and <em>fixed-point</em> arithmetic. Fixed-point representations make fractional
                        arithmetic possible using only integers.
                    </p>

                    <h2>Representation</h2>

                    <p>
                        So what is <em>fixed-point</em>? As the name implies, it describes a number where the decimal point is
                        in a fixed position. Specifically, in this context, this refers to the position of the decimal point in the
                        binary representation. For example, a fixed-point number that has 16 bits might use 4 bits for the integer
                        part, and 12 bits for the fractional part. In <a href="https://en.wikipedia.org/wiki/Two%27s_complement">two's
                        complement</a>, this implies that the integer is in the range [&minus;8, 7], and the fractional part
                        is in the range [0, 1).
                    </p>

                    <table class="responsive">
                        <caption data-tablenum="1">Fixed-point binary representation and bit values.</caption>
                        <thead>
                            <tr>
                                <th>Format</th>
                                <th class="centre" colspan="16">Bit values</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td data-label="Format">Integer</td>
                                <td data-label="Bit 15 value">&minus;2<sup>15</sup></td>
                                <td data-label="Bit 14 value">2<sup>14</sup></td>
                                <td data-label="Bit 13 value">2<sup>13</sup></td>
                                <td data-label="Bit 12 value">2<sup>12</sup></td>
                                <td data-label="Bit 11 value">2<sup>11</sup></td>
                                <td data-label="Bit 10 value">2<sup>10</sup></td>
                                <td data-label="Bit 9 value">2<sup>9</sup></td>
                                <td data-label="Bit 8 value">2<sup>8</sup></td>
                                <td data-label="Bit 7 value">2<sup>7</sup></td>
                                <td data-label="Bit 6 value">2<sup>6</sup></td>
                                <td data-label="Bit 5 value">2<sup>5</sup></td>
                                <td data-label="Bit 4 value">2<sup>4</sup></td>
                                <td data-label="Bit 3 value">2<sup>3</sup></td>
                                <td data-label="Bit 2 value">2<sup>2</sup></td>
                                <td data-label="Bit 1 value">2<sup>1</sup></td>
                                <td data-label="Bit 0 value">2<sup>0</sup></td>
                            </tr>
                            <tr>
                                <td data-label="Format">12 fractional bits</td>
                                <td data-label="Bit 15 value">&minus;2<sup>3</sup></td>
                                <td data-label="Bit 14 value">2<sup>2</sup></td>
                                <td data-label="Bit 13 value">2<sup>1</sup></td>
                                <td data-label="Bit 12 value">2<sup>0</sup></td>
                                <td data-label="Bit 11 value">2<sup>&minus;1</sup></td>
                                <td data-label="Bit 10 value">2<sup>&minus;2</sup></td>
                                <td data-label="Bit 9 value">2<sup>&minus;3</sup></td>
                                <td data-label="Bit 8 value">2<sup>&minus;4</sup></td>
                                <td data-label="Bit 7 value">2<sup>&minus;5</sup></td>
                                <td data-label="Bit 6 value">2<sup>&minus;6</sup></td>
                                <td data-label="Bit 5 value">2<sup>&minus;7</sup></td>
                                <td data-label="Bit 4 value">2<sup>&minus;8</sup></td>
                                <td data-label="Bit 3 value">2<sup>&minus;9</sup></td>
                                <td data-label="Bit 2 value">2<sup>&minus;10</sup></td>
                                <td data-label="Bit 1 value">2<sup>&minus;11</sup></td>
                                <td data-label="Bit 0 value">2<sup>&minus;12</sup></td>
                            </tr>
                        </tbody>
                    </table>

                    <p>
                        Fixed-point numbers are stored as integers. All integers have a range that is determined by: the number of
                        bits used to encode the integer, and whether the integer is signed or unsigned. For example, a signed 16-bit
                        integer has <span class="eq">2<sup>16</sup> = 65536</span> possible values ranging from &minus;32768
                        (<code>0b1000000000000000</code>) to 32767 (<code>0b0111111111111111</code>). If the decimal point is moved
                        to the left, then the new range will be reduced. Note, though, that the position of the decimal point is not
                        encoded in the data. So, for example, <code>0b0001000000000000</code> conveys 4096 as an integer, or 1 if
                        there are 12 fractional bits. The decimal position will have to be conveyed in metadata, comments,
                        or documentation. This description of the number of integer and fractional bits is called the Q-format.
                    </p>

                    <p>
                        The choice of the number of integer and fractional bits is a tradeoff: more fractional bits increases the
                        precision whilst reducing the numeric range. Fewer fractional bits has the opposite effect. See some examples
                        below. It's usually preferable to keep the integer range as small as possible with respect to the data, whilst
                        avoiding overflow, in order to maximise the precision (and hence minimising any numeric error).
                    </p>

                    <table class="responsive">
                        <caption data-tablenum="2">Fixed-point ranges.</caption>
                        <thead>
                            <tr>
                                <th>Number of bits</th>
                                <th>Integer bits</th>
                                <th>Fractional bits</th>
                                <th>Minimum value</th>
                                <th>Maximum value</th>
                                <th>Resolution</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td data-label="Number of bits">16</td>
                                <td data-label="Integer bits">16</td>
                                <td data-label="Fractional bits">0</td>
                                <td data-label="Minimum value">&minus;32768</td>
                                <td data-label="Maximum value">32767</td>
                                <td data-label="Resolution">1</td>
                            </tr>
                            <tr>
                                <td data-label="Number of bits">16</td>
                                <td data-label="Integer bits">4</td>
                                <td data-label="Fractional bits">12</td>
                                <td data-label="Minimum value">&minus;8.0</td>
                                <td data-label="Maximum value">7.999755859375</td>
                                <td data-label="Resolution">0.000244140625</td>
                            </tr>
                            <tr>
                                <td data-label="Number of bits">16</td>
                                <td data-label="Integer bits">1</td>
                                <td data-label="Fractional bits">15</td>
                                <td data-label="Minimum value">&minus;1.0</td>
                                <td data-label="Maximum value">0.999969482421875</td>
                                <td data-label="Resolution">0.000030517578125</td>
                            </tr>
                            <tr>
                                <td data-label="Number of bits">16</td>
                                <td data-label="Integer bits">12</td>
                                <td data-label="Fractional bits">14</td>
                                <td data-label="Minimum value">&minus;2048.0</td>
                                <td data-label="Maximum value">2047.9375</td>
                                <td data-label="Resolution">0.0625</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2>Conversion</h2>

                    <p>
                        Conversion between integer and fractional numbers is straightforward. For a fractional number
                        \(x\) with \(N\) fractional bits, the integer value \(y\in\mathbb{Z}\) is calculated as: \[y \approx 2^Nx\]
                    </p>

                    <p>
                        Note that \(y\) is necessarily rounded in order to store the value as an integer. This
                        rounding causes an irreversible loss of precision.
                    </p>

                    <p>
                        The fractional value can be recovered from the integer with the reverse operation: \[x \approx \frac{y}{2^N}\]
                    </p>


                    <h2>Arithmetic Operations</h2>

                    <p>
                        But how is this useful for arithmetic? For addition and subtraction, provided that
                        the operands have the same number of fractional bits, then the operation is unaffected: the
                        result will have the same number of fractional bits, and can be converted accordingly. Specifically,
                        if two fractional operands \(x_1\) and \(x_2\) have \(N\) fractional bits, then the result of adding
                        them will be: \[2^Nx_1 + 2^Nx_2 \equiv 2^N(x_1 + x_2)\]
                    </p>

                    <p>
                        As with all arithmetic operations, care must be taken to avoid an overflow. Most processors will
                        either saturate or wrap the result in the event of an overflow.
                    </p>

                    <p>
                        Multiplication is slightly more complex. The operands are not required to have the same number of
                        fractional bits, but the number of fractional bits in the result will depend on the operands.
                        Specifically, if \(x_1\) has \(M\) fractional bits, and \(x_2\) has \(N\) fractional bits, then
                        the result of multiplying them will be: \[2^Mx_1 \cdot 2^Nx_2 \equiv 2^{M + N}x_1x_2\]
                    </p>

                    <p>
                        In other words, the result will have \(M + N\) fractional bits. The result will also require a
                        word size that is the sum of the operand word sizes. Depending on the operation, it is usually
                        possible to perform an arithmetic right shift on the result in order to store it in a smaller
                        word.
                    </p>

                    <p>
                        Many DSPs have native support for fixed-point types with one integer bit, i.e. numbers in the
                        range [&minus;1, 1). For arithmetic operations, this often includes allocating an appropriate
                        accumulator for the result, and then bit shifting the accumulator output to the original size
                        and format.
                    </p>

                </div>
            </div>
        </div>

    </body>

</html>
