<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Convert between floating-point values and their Qm.n fixed-point integer representations, and calculate the representation error. Perform arithmetic operations on fixed-point values.">
        <meta name="keywords" content="q-fomat, fixed-point, floating-point, convert, calculate, calculator, arithmetic">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Q-format Converter &amp; Calculator</title>
        <meta property="og:title" content="Q-format Converter &amp; Calculator" />
        <meta property="og:url" content="https://chummersone.github.io/qformat.html" />
        <meta property="og:locale" content="en_GB" />
        <meta property="og:description" content="Convert between floating-point and Qm.n fixed-point values">
        <meta property="og:site_name" content="chummersone.github.io" />
        <meta property="og:type" content="website" />
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
        <link rel="stylesheet" href="https://chummersone.github.io/assets/css/style.css?v=f6040d589f1187e6eaa1ec97f2b3af33299fb0ad">
        <link rel="stylesheet" href="qformat.css?v=8">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
                integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
                crossorigin="anonymous">
        </script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        <script src="qformat.js?v=3"></script>
        <script src="qformat.converter.js?v=3"></script>
        <script src="qformat.calculator.js?v=3"></script>
        <script>
            $(function() {
                var dataIndex = 'tab';
                var dataStore = window.sessionStorage;
                var tabIndex = 0;
                try {
                    tabIndex = dataStore.getItem(dataIndex);
                } catch(e) {
                    tabIndex = 0;
                }
                $('#tabs').tabs({
                    active : tabIndex,
                    activate : function(event, ui){
                        var newTabIndex = ui.newTab.parent().children().index(ui.newTab);
                        dataStore.setItem(dataIndex, newTabIndex);
                    }
                });
            });
        </script>
    </head>

    <body>
        <h1>Q-format Converter &amp; Calculator</h1>

        <p>
            <ul>
                <li>Convert between floating-point values and their <em>Qm.n</em> fixed-point integer representations,
                    and calculate the representation error.</li>
                <li>Perform arithmetic operations on fixed-point values.</li>
            </ul>
        </p>

        <div id="container">
            <div id="tabs">
                <ul>
                <li><a href="#converter">Converter</a></li>
                <li><a href="#arithmetic">Calculator<sup><em>beta</em></sup></a></li>
                </ul>
                <div class="tab-panel" id="converter">

                    <div class="column-container">
                        <fieldset>
                            <legend>Q-Format Settings</legend>

                            <p>Choose your conversion options.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="num_bits">Word size in bits (<em>m+n</em>)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="num_bits">
                                        <option value="16">16</option>
                                        <option value="24" selected>24</option>
                                        <option value="32">32</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                            ---><div class="col w75">
                                    <select id="num_frac_bits">
                                        <option value="23" selected>23</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="signed">Signed?</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="signed" type="checkbox" checked>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="format">Integer format</label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="format">
                                        <option value="hex" selected>Hexadecimal</option>
                                        <option value="dec">Decimal</option>
                                        <option value="bin">Binary</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="maxfloat">Maximum float value</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="maxfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="minfloat">Minimum float value</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="minfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <label>Bit positions and values</label>

                                <table id="bit-pos">
                                    <tr>
                                        <th>Bit Position</th>
                                        <th>Bit Value</th>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </div>
                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Convert</legend>

                            <p>Type an integer or float in the boxes below. Click or tab away to update.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="integer">Integer (<span id="labelformat">hexadecimal</span>)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="integer" type="text" value="0" maxlength="6">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="float">Float</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="float" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="realfloat">Fixed-point value</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="realfloat" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="floaterror">Representation error</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="floaterror" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="errordb">Representation error (dB)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="errordb" type="text" value="0" disabled>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Batch Convert</legend>

                            <p>Type integers or floats in the boxes below separated by commas, spaces or new lines. Click or tab away to update.</p>

                            <label for="batch-int">Integers</label>
                            <textarea id="batch-int" rows="6"></textarea>

                            <label for="batch-float">Floats</label>
                            <textarea id="batch-float" rows="6"></textarea>

                        </fieldset>
                    </div>

                </div>

                <div class="tab-panel" id="arithmetic">

                    <div class="column-container">
                        <fieldset>
                            <legend>Left Operand</legend>

                            <p>Choose the format and value of the left operand.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_int">Integer value (<span id="labelformat_lhs">hexadecimal</span>)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="left_operand_int" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_float">Float value</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="left_operand_float" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_num_bits">Word size in bits (<em>m+n</em>)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="left_operand_num_bits">
                                        <option value="16">16</option>
                                        <option value="24" selected>24</option>
                                        <option value="32">32</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                            ---><div class="col w75">
                                    <select id="left_operand_num_frac_bits">
                                        <option value="23" selected>23</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_signed">Signed?</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="left_operand_signed" type="checkbox" checked>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="left_operand_format">Integer format</label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="left_operand_format">
                                        <option value="hex" selected>Hexadecimal</option>
                                        <option value="dec">Decimal</option>
                                        <option value="bin">Binary</option>
                                    </select>
                                </div>
                            </div>

                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Operator</legend>

                            <p>Choose the operation, the arithmetic behaviour, and the output word size.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="operator">Operator</label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="operator">
                                        <option value="add" selected>Add</option>
                                        <option value="subtract">Subtract</option>
                                        <option value="multiply">Multiply</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="behaviour"><span class="tooltip" data-text="Overflowing results are mitigated by
                                        saturation or wrapping. Saturation clamps the result to the arithmetic range of the output
                                        Q-format. This will retain the sign of the result, whilst affecting the magnitude. Wrapping
                                        is implemented by incrementing or decrementing the integer result by 2^(m+n) until the result
                                        is within the range of the output Q-format. This may change the sign and magnitude of the
                                        result.">Behaviour</span></label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="behaviour">
                                        <option value="saturate" selected>Saturate</option>
                                        <option value="wrap">Wrap</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_out_num_bits"><span class="tooltip" data-text="Size of the word
                                        used for the calculation result. The precision can be reduced by choosing the right
                                        shift below.">Calculation size in bits (<em>m+n</em>)</span></label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="arithmetic_out_num_bits">
                                        <option value="16">16</option>
                                        <option value="24" selected>24</option>
                                        <option value="32">32</option>
                                        <option value="40">40</option>
                                        <option value="48" selected>48</option>
                                        <option value="56">56</option>
                                        <option value="64">64</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_right_shift"><span class="tooltip" data-text="Perform an
                                        arithmetic right shift after saturation or rounding.">
                                        Right shift result</span></label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="arithmetic_right_shift">
                                        <option value="0" selected>0</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_shift_round">Right shift with rounding?</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="right_shift_round" type="checkbox" checked>
                                </div>
                            </div>

                            <p>
                                
                            </p>
    
                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Right Operand</legend>

                            <p>Choose the format and value of the right operand.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_int">Integer value (<span id="labelformat_rhs">hexadecimal</span>)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="right_operand_int" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_float">Float value</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="right_operand_float" type="text" value="0">
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_num_bits">Word size in bits (<em>m+n</em>)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="right_operand_num_bits">
                                        <option value="16">16</option>
                                        <option value="24" selected>24</option>
                                        <option value="32">32</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                            ---><div class="col w75">
                                    <select id="right_operand_num_frac_bits">
                                        <option value="23" selected>23</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_signed">Signed?</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="right_operand_signed" type="checkbox" checked>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="right_operand_format">Integer format</label>
                                </div><!--
                                ---><div class="col w75">
                                    <select id="right_operand_format">
                                        <option value="hex" selected>Hexadecimal</option>
                                        <option value="dec">Decimal</option>
                                        <option value="bin">Binary</option>
                                    </select>
                                </div>
                            </div>

                        </fieldset>
                    </div>
                    <div class="column-container">
                        <fieldset>
                            <legend>Result</legend>

                            <p>The result of the operation.</p>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_fixed">Result (Fixed-point)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="arithmetic_result_fixed" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_int">Result (Hexadecimal)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="arithmetic_result_int" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_float">Result (Float)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="arithmetic_result_float" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_num_frac_bits">Fractional bits (<em>n</em>)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="arithmetic_result_num_frac_bits" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_floaterror">Error</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="arithmetic_result_floaterror" type="text" value="0" disabled>
                                </div>
                            </div>

                            <div class="control-grp">
                                <div class="col w25">
                                    <label for="arithmetic_result_errordb">Error (dB)</label>
                                </div><!--
                                ---><div class="col w75">
                                    <input id="arithmetic_result_errordb" type="text" value="0" disabled>
                                </div>
                            </div>
                        </fieldset>
                    </div>

                </div>
            </div>
        </div>

    </body>

</html>
